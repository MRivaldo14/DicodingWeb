importScripts("https://storage.googleapis.com/workbox-cdn/releases/6.5.4/workbox-sw.js"),workbox?(console.log("✅ Workbox loaded"),self.skipWaiting(),workbox.core.clientsClaim(),workbox.precaching.precacheAndRoute([{'revision':'7b93104fd6e9d2156c6e5f90d14e41ad','url':'/DicodingWeb/bundle.js'},{'revision':'62691d85ea420a3ad3586b236857cc3b','url':'/DicodingWeb/icons/icon-128x128.png'},{'revision':'a3f50989a7566efbf0ff5860d79f6682','url':'/DicodingWeb/icons/icon-152x152.png'},{'revision':'c1afba313289e02ccf2367eb0a56de21','url':'/DicodingWeb/icons/icon-192x192.png'},{'revision':'088779dd2481f9b65ef3dd5a3e31eb85','url':'/DicodingWeb/icons/icon-384x384.png'},{'revision':'40fa6e0059e7e3a58c83a7d7461d5a3f','url':'/DicodingWeb/icons/icon-512x512.png'},{'revision':'b1170026ac130eb4ba69ec4791f13d5c','url':'/DicodingWeb/icons/icon-72x72.png'},{'revision':'b657b3080efb34209c93d283caf563d6','url':'/DicodingWeb/icons/icon-96x96.png'},{'revision':'b657b3080efb34209c93d283caf563d6','url':'/DicodingWeb/icons/shortcut-icon.png'},{'revision':'0301a1dac8e519615fd35edac6efdcf4','url':'/DicodingWeb/index.html'},{'revision':'eb4707497817201267d9570bf2866c23','url':'/DicodingWeb/manifest.json'},{'revision':'546afdaf60bcfe8116f2e2bbb355f0c8','url':'/DicodingWeb/styles/style.css'}],{ignoreURLParametersMatching:[/.*/]}),workbox.routing.registerRoute((({url:e})=>"https://story-api.dicoding.dev"===e.origin),new workbox.strategies.NetworkFirst({cacheName:"story-api-cache",networkTimeoutSeconds:10,plugins:[new workbox.expiration.ExpirationPlugin({maxEntries:50,maxAgeSeconds:300}),new workbox.cacheableResponse.CacheableResponsePlugin({statuses:[0,200]})]})),workbox.routing.registerRoute((({request:e})=>"image"===e.destination),new workbox.strategies.CacheFirst({cacheName:"image-cache",plugins:[new workbox.expiration.ExpirationPlugin({maxEntries:60,maxAgeSeconds:2592e3}),new workbox.cacheableResponse.CacheableResponsePlugin({statuses:[0,200]})]})),workbox.routing.registerRoute((({request:e})=>"navigate"===e.mode),new workbox.strategies.NetworkFirst({cacheName:"html-cache",plugins:[new workbox.expiration.ExpirationPlugin({maxEntries:10})]})),workbox.routing.setCatchHandler((async({event:e})=>"document"===e.request.destination?caches.match("./index.html"):Response.error()))):console.log("❌ Workbox gagal dimuat"),self.addEventListener("push",(async e=>{let o={title:"Story App",body:"Anda memiliki notifikasi baru.",icon:`${self.location.origin}/DicodingWeb/icons/icon-192x192.png`,badge:`${self.location.origin}/DicodingWeb/icons/icon-192x192.png`,image:`${self.location.origin}/DicodingWeb/icons/icon-512x512.png`,url:`${self.location.origin}/DicodingWeb/`};if(e.data)try{const i=e.data.json();o={...o,...i}}catch(i){console.warn("⚠️ Push data bukan JSON. Gunakan sebagai body biasa.");const n=await e.data.text();o.body=n}console.log("📬 Push received:",o),e.waitUntil(self.registration.showNotification(o.title,{body:o.body,icon:o.icon,badge:o.badge,image:o.image,data:{url:o.url}}))})),self.addEventListener("notificationclick",(e=>{e.notification.close(),e.waitUntil(clients.matchAll({type:"window",includeUncontrolled:!0}).then((o=>{for(const i of o)if(i.url===e.notification.data.url&&"focus"in i)return i.focus();if(clients.openWindow)return clients.openWindow(e.notification.data.url).catch((e=>{console.error("❌ Gagal membuka window:",e)}))})))}));