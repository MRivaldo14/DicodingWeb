importScripts("https://storage.googleapis.com/workbox-cdn/releases/6.5.4/workbox-sw.js");const CACHE_NAME="app-shell-v1";workbox?(console.log("✅ Workbox loaded"),workbox.precaching.precacheAndRoute([{url:"/",revision:"1"},{url:"/index.html",revision:"1"},{url:"/styles/style.css",revision:"1"},{url:"/icons/icon-192x192.png",revision:"1"},{url:"/icons/icon-512x512.png",revision:"1"}],{ignoreURLParametersMatching:[/.*/]}),workbox.routing.registerRoute((({url:e})=>"https://story-api.dicoding.dev"===e.origin),new workbox.strategies.NetworkFirst({cacheName:"story-api-cache",plugins:[new workbox.expiration.ExpirationPlugin({maxEntries:50,maxAgeSeconds:300})]})),workbox.routing.registerRoute((({request:e})=>"image"===e.destination),new workbox.strategies.CacheFirst({cacheName:"image-cache",plugins:[new workbox.expiration.ExpirationPlugin({maxEntries:60,maxAgeSeconds:2592e3})]})),workbox.routing.registerRoute((({request:e})=>"navigate"===e.mode),(async()=>{try{return await fetch("/")}catch(e){return caches.match("/index.html")}}))):console.log("❌ Workbox failed to load"),self.addEventListener("push",(e=>{let i={};try{i=e.data?e.data.json():{}}catch(o){i={title:"Notifikasi Baru",body:e.data.text()}}const o=i.title||"Notifikasi Baru",t={body:i.body||"Anda memiliki pesan baru.",icon:i.icon||"/icon.png",image:i.image||void 0,badge:i.badge||"/badge-icon.png",data:{url:i.url||"/",dateOfArrival:Date.now(),primaryKey:i.primaryKey||0},vibrate:i.vibrate||[100,50,100],actions:i.actions||[]};e.waitUntil(self.registration.showNotification(o,t))})),self.addEventListener("notificationclick",(e=>{e.notification.close();const i=e.notification.data?.url||"/";e.waitUntil(clients.matchAll({type:"window",includeUncontrolled:!0}).then((e=>{for(const o of e){const e=new URL(o.url),t=new URL(i,e.origin);if(e.href===t.href&&"focus"in o)return o.focus()}if(clients.openWindow)return clients.openWindow(i)})))}));